<!DOCTYPE html>

<html xmlns="https://www.w3.org/1999/xhtml" lang="en-SG">
<head>
  <meta name="google-site-verification" content="hoIU93Z7-8uZkf1Ebby9FRPN7Qk_Fbp_TJ14rGASEYo" />
  <meta http-equiv="content-type" content="text/html; charset=utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="shortcut icon" href="/resources/Logos/favicon.ico" type="image/x-icon" />
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet" />
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>SportRank</title>
  <meta name="description" content="Haveno-Web App" />
  <meta name="author" content="FreeRoss" />
  <link rel="shortcut icon" type="image/x-icon" href="/assets/favicon.1FgT2997.ico" />
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css"
    integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp" crossorigin="anonymous" />
  <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro" rel="stylesheet" />
  <link rel="icon" href="data:," />
  <base href="./" />
  <meta http-equiv="Content-Security-Policy" content="unsafe-inline" />
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>
  <script type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script>
  <script src="https://unpkg.com/realm-web/dist/bundle.iife.js"></script>
  <script src="/js/elm.js"></script>
  <meta name="theme-color" content="#005477" />
  <link rel="manifest" href="/assets/manifest.CYTLubnW.json" />
  <script>
    if ("serviceWorker" in navigator) {
      navigator.serviceWorker
        .register("/service-worker.js", { scope: "/" })
        .then((registration) => {
          console.log("Registration successful");
        })
        .catch((error) => {
          console.log("Registration failed");
        });
    }
  </script>
  <meta name="description" content="Haveno-Web" />
  <meta name="keywords" content="monero" />
  <script type="module" crossorigin src="/assets/index-jbKONWj9.js"></script>
  <link rel="stylesheet" crossorigin href="/css/index.CXvFga1Q.css">
</head>
<body>
  <div id="elm-container"></div>
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      var detectEnvironment = function () {
        var protocol = window.location.protocol;
        var hostname = window.location.hostname;
        var port = window.location.port;
        var defaultPort = protocol === "https:" ? 443 : 80;
        var parsedPort = port ? parseInt(port, 10) : defaultPort;
        return {
          protocol: protocol,
          hostname: hostname,
          port: parsedPort,
        };
      };

      var environmentInfo = detectEnvironment();
      console.log("Protocol:", environmentInfo.protocol);
      console.log("Hostname:", environmentInfo.hostname);
      console.log("Port:", environmentInfo.port);

      const protocol = environmentInfo.protocol;
      const hostnm = environmentInfo.hostname;
      const prt = environmentInfo.port;

      jsonUrl = JSON.stringify(protocol + "//" + hostnm + ":" + prt);
      console.log("jsonUrl:", jsonUrl);

      var eapp = Elm.Main.init({
        node: document.getElementById("elm-container"),
        flags: jsonUrl,
      });

      eapp.ports.sendMessage.subscribe(function (message) {
        console.log("Message sent to js ", message);
        handleMessageFromElm(message);
      });

      async function sendWebSocketChangeEventFromMongoDbToElmPort(applicationData) {
        console.log('applicationData in sendWebSocketChangeEventFromMongoDbToElmPort', applicationData);
        additionalDataObjExtendibleIfRequired = { userid: '', nickname: '' }
        jsonMsgToElm = {
          operationEventMsg: 'webSocket',
          dataFromMongo: applicationData,
          additionalDataFromJs: additionalDataObjExtendibleIfRequired,
        }
        eapp.ports.messageReceiver.send(jsonMsgToElm)
      }
    });
  </script>
  <script src="/js/scrollTopLinksMenu.js"></script>
  <script src="/js/burgeranimation.js"></script>
</body>
</html>